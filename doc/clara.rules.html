<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clara.rules documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clara-rules 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="clara.rules.html"><span>clara.rules</span></a></li><li><a href="clara.rules.accumulators.html"><span>clara.rules.accumulators</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="clara.rules.html#var-%3D%3D"><span>==</span></a></li><li><a href="clara.rules.html#var-add-query"><span>add-query</span></a></li><li><a href="clara.rules.html#var-add-rule"><span>add-rule</span></a></li><li><a href="clara.rules.html#var-defquery"><span>defquery</span></a></li><li><a href="clara.rules.html#var-defrule"><span>defrule</span></a></li><li><a href="clara.rules.html#var-fire-rules"><span>fire-rules</span></a></li><li><a href="clara.rules.html#var-insert"><span>insert</span></a></li><li><a href="clara.rules.html#var-insert%21"><span>insert!</span></a></li><li><a href="clara.rules.html#var-mk-query"><span>mk-query</span></a></li><li><a href="clara.rules.html#var-mk-rule"><span>mk-rule</span></a></li><li><a href="clara.rules.html#var-mk-rulebase"><span>mk-rulebase</span></a></li><li><a href="clara.rules.html#var-mk-session"><span>mk-session</span></a></li><li><a href="clara.rules.html#var-query"><span>query</span></a></li><li><a href="clara.rules.html#var-retract"><span>retract</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>clara.rules documentation</h2><pre class="doc"></pre><div class="public" id="var-%3D%3D"><h3>==</h3><h4 class="macro">macro</h4><div class="usage"><code>(== variable content)</code></div><pre class="doc">Unifies a variable with a given value. This should be used only inside the definition of a rule.
</pre></div><div class="public" id="var-add-query"><h3>add-query</h3><div class="usage"><code>(add-query rulebase)</code><code>(add-query rulebase query)</code><code>(add-query rulebase query &amp; more)</code></div><pre class="doc">Returns a new rulebase identical to the given one, but with the additional queries. 
This is only used when dynamically adding queries to a rulebase</pre></div><div class="public" id="var-add-rule"><h3>add-rule</h3><div class="usage"><code>(add-rule rulebase)</code><code>(add-rule rulebase production)</code><code>(add-rule rulebase production &amp; more)</code></div><pre class="doc">Returns a new rulebase identical to the given one, but with the additional rules. 
This is only used when dynamically adding rules to a rulebase.</pre></div><div class="public" id="var-defquery"><h3>defquery</h3><h4 class="macro">macro</h4><div class="usage"><code>(defquery name &amp; body)</code></div><pre class="doc">Defines a query and stored it in the given var. For instance, a simple query that accepts no
   parameters would look like this:
    
(defquery check-job
  &quot;Checks the job for validation errors.&quot;
  []
  [?issue &lt;- ValidationError])

   See the guide at https://github.com/rbrush/clara-rules/wiki/Guide for details.</pre></div><div class="public" id="var-defrule"><h3>defrule</h3><h4 class="macro">macro</h4><div class="usage"><code>(defrule name &amp; body)</code></div><pre class="doc">Defines a rule and stores it in the given var. For instance, a simple rule would look like this:

(defrule hvac-approval
  &quot;HVAC repairs need the appropriate paperwork, so insert a validation error if approval is not present.&quot;
  [WorkOrder (= type :hvac)]
  [:not [ApprovalForm (= formname &quot;27B-6&quot;)]]
  =&gt;
  (insert! (-&gt;ValidationError 
            :approval 
            &quot;HVAC repairs must include a 27B-6 form.&quot;)))
  
  See the guide at https://github.com/rbrush/clara-rules/wiki/Guide for details.</pre></div><div class="public" id="var-fire-rules"><h3>fire-rules</h3><div class="usage"><code>(fire-rules session)</code></div><pre class="doc">Fires are rules in the given session. Once a rule is fired, it is labeled in a fired
state and will not be re-fired unless facts affecting the rule are added or retracted.

This function does not modify the given session to mark rules as fired. Instead, it returns
a new session in which the rules are marked as fired.</pre></div><div class="public" id="var-insert"><h3>insert</h3><div class="usage"><code>(insert session &amp; facts)</code></div><pre class="doc">Inserts one or more facts into a working session. It does not modify the given
session, but returns a new session with the facts added.</pre></div><div class="public" id="var-insert%21"><h3>insert!</h3><div class="usage"><code>(insert! &amp; facts)</code></div><pre class="doc">To be executed from with a rule's right-hand side, this inserts a new fact or facts into working memory.
Inserted facts are always logical, in that if the support for the insertion is removed, the fact
will automatically be retracted.</pre></div><div class="public" id="var-mk-query"><h3>mk-query</h3><h4 class="macro">macro</h4><div class="usage"><code>(mk-query params lhs)</code></div><pre class="doc">Creates a new query based on a sequence of a conditions. 
This is only used when creating queries dynamically; most users should use defquery instead.</pre></div><div class="public" id="var-mk-rule"><h3>mk-rule</h3><h4 class="macro">macro</h4><div class="usage"><code>(mk-rule lhs rhs)</code></div><pre class="doc">Creates a new rule based on a sequence of a conditions and a righthand side. 
This is only used when creating new rules directly; most users should use defrule instead.</pre></div><div class="public" id="var-mk-rulebase"><h3>mk-rulebase</h3><div class="usage"><code>(mk-rulebase)</code></div><pre class="doc">Creates an empty rulebase. This is only used when generating rulebases dynamically.
</pre></div><div class="public" id="var-mk-session"><h3>mk-session</h3><div class="usage"><code>(mk-session source &amp; more)</code></div><pre class="doc">Creates a new session using the given rule source. Thew resulting session
is immutable, and can be used with insert, retract, fire-rules, and query functions.</pre></div><div class="public" id="var-query"><h3>query</h3><div class="usage"><code>(query session query params)</code></div><pre class="doc">Runs the given query with the given params against the session.
</pre></div><div class="public" id="var-retract"><h3>retract</h3><div class="usage"><code>(retract session &amp; facts)</code></div><pre class="doc">Retracts a fact from a working session. It does not modify the given session,
but returns a new session with the facts retracted.</pre></div></div></body></html>